# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ tap-detector –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª–∞–≤–∏—à
_Exported on 13.10.2025 at 23:07:13 GMT+3 from Cursor (1.7.44)_

---

**User**

(20251013-165526) –ò–∑—É—á–∏ README.md –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ —Å—Å—ã–ª–∫–∞–º –∏–∑ –Ω–µ–≥–æ.
–Ø –ø—Ä–æ—à—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∫—É –≤ tap-detector.
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –Ω–∞–∂–∞—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–ª–∞–≤–∏—à –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ tap-launcher.
tap-detector –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤—Ç–∞—å —Ç–∞–ø—ã –≤–æ–æ–±—â–µ, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ —Ç–∞–ø –ø—Ä–æ—Å—Ä–æ—á–µ–Ω –Ω–µ–Ω—É–∂–Ω—ã.
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ tap-detector –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∂–∞—Ç—ã–µ –∫–ª–∞–≤–∏—à–∏ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ –±—ã–ª–∏ –æ—Ç–∂–∞—Ç—ã.
–¢.–µ. –≤ tap-detector –Ω–µ—Ç –≤–æ–æ–±—â–µ –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∞–ø–∞.
–ü—Ä–µ–¥–ª–æ–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ.
–í–Ω–æ—Å–∏—Ç—å –Ω–∏–∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω–æ.

---

**Cursor**

–Ø –∏–∑—É—á—É README.md –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∞ –∑–∞—Ç–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ–¥ tap-detector –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.


–¢–µ–ø–µ—Ä—å –∏–∑—É—á—É –∫–æ–¥ tap-detector –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:


–¢–µ–ø–µ—Ä—å –∏–∑—É—á—É key_normalizer.py –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞–≤–∏—à:


–¢–µ–ø–µ—Ä—å –∏–∑—É—á—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è:


–¢–µ–ø–µ—Ä—å —è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ–¥ tap-detector –∏ –ø—Ä–µ–¥–ª–æ–∂—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ tap-detector

–ò–∑—É—á–∏–≤ –∫–æ–¥, —è –≤–∏–∂—É, —á—Ç–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ –æ—Ç–ø—É—â–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ `timeout` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.2 —Å–µ–∫—É–Ω–¥—ã)
2. **–°–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Ç–∞–ø–∞—Ö**: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ timeout –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "Invalid tap (timeout exceeded)"
3. **–õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –¢–∞–ø —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ –æ—Ç–ø—É—â–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ timeout

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–°–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, tap-detector –¥–æ–ª–∂–µ–Ω:

1. **–£–±—Ä–∞—Ç—å –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Ç–∞–ø–∞—Ö
2. **–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∂–∞—Ç—ã–µ –∫–ª–∞–≤–∏—à–∏ –ø–æ—Å–ª–µ –∏—Ö –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è** - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **–£–±—Ä–∞—Ç—å –ø–æ–Ω—è—Ç–∏–µ "–≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏" —Ç–∞–ø–∞** - –ª—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

#### 1. –í `tap_monitor.py`:

**–£–±—Ä–∞—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∫—É timeout –≤ `_on_press()` –∏ `_on_release()`
- –õ–æ–≥–∏–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∞–ø–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- Callback `on_tap_invalid` –∏ —Å–≤—è–∑–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É
- –°–æ—Å—Ç–æ—è–Ω–∏–µ `timeout` –∏–∑ –∫–ª–∞—Å—Å–∞ `TapMonitor`

**–ò–∑–º–µ–Ω–∏—Ç—å:**
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ `_on_release()` - —É–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `duration <= self.timeout`
- –í—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å —Ç–∞–ø "–≤–∞–ª–∏–¥–Ω—ã–º" –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –≤—Å–µ—Ö –∫–ª–∞–≤–∏—à
- –£–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `timeout` –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

#### 2. –í `main.py`:

**–£–±—Ä–∞—Ç—å:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä `--timeout` –∏–∑ CLI
- Callback `on_tap_invalid`
- –õ–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Ç–∞–ø–æ–≤

**–ò–∑–º–µ–Ω–∏—Ç—å:**
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ `TapMonitor` - —É–±—Ä–∞—Ç—å `timeout` –∏ `on_tap_invalid`

#### 3. –í `formatter.py`:

**–£–±—Ä–∞—Ç—å:**
- –§—É–Ω–∫—Ü–∏—é `format_tap_invalid()`
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Ç–∞–ø–∞—Ö

#### 4. –í `constants.py`:

**–£–±—Ä–∞—Ç—å:**
- `DEFAULT_TIMEOUT` (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)

#### 5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

**–ò–∑–º–µ–Ω–∏—Ç—å:**
- –£–±—Ä–∞—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ timeout –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∞–ø–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∫ "–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∂–∞—Ç—ã—Ö –∫–ª–∞–≤–∏—à"
- –£–±—Ä–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã —Å timeout –∏–∑ README –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:

**–ë—ã–ª–æ:**
```
‚úì Tap detected! Duration: 0.18s
  Keys: ctrl_l+shift_l
  ...

‚úó Invalid tap (timeout exceeded: 0.31s)
  Keys: ctrl_l+shift_l
```

**–°—Ç–∞–Ω–µ—Ç:**
```
‚úì Keys detected: ctrl_l+shift_l
  Duration: 0.18s
  
  üìã TOML config fragment:
  ...

‚úì Keys detected: ctrl_l+shift_l  
  Duration: 0.31s
  
  üìã TOML config fragment:
  ...
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **–£–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏** - –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É** - –ª—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ = –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. **–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é** - "detected" –≤–º–µ—Å—Ç–æ "valid tap"
4. **–£–±—Ä–∞—Ç—å CLI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω `--timeout`
5. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - —É–±—Ä–∞—Ç—å `timeout` –∏–∑ `TapState`

–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø–æ–∫–∞–∑–∞–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞?

```plaintext
‚úì Tap detected! Duration: 0.18s
  Keys: ctrl_l+shift_l
  ...

‚úó Invalid tap (timeout exceeded: 0.31s)
  Keys: ctrl_l+shift_l
```

```plaintext
‚úì Keys detected: ctrl_l+shift_l
  Duration: 0.18s
  
  üìã TOML config fragment:
  ...

‚úì Keys detected: ctrl_l+shift_l  
  Duration: 0.31s
  
  üìã TOML config fragment:
  ...
```

---

**User**

–î–∞, –≤—Å—ë –≤–µ—Ä–Ω–æ. –í–Ω–æ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥, –Ω–æ commit –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–π.

---

**Cursor**

–û—Ç–ª–∏—á–Ω–æ! –í–Ω–µ—Å—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –ù–∞—á–Ω—É —Å –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:


## 1. –û–±–Ω–æ–≤–ª—è—é constants.py - —É–±–∏—Ä–∞—é DEFAULT_TIMEOUT


```python
"""Constants for tap detector."""

# Version
__version__ = '0.1.0'


```

## 2. –£–ø—Ä–æ—â–∞—é TapMonitor - —É–±–∏—Ä–∞—é timeout –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é


```python
"""Tap monitoring and detection logic.

This module implements the core tap detection logic using pynput keyboard listener.
"""

from dataclasses import dataclass, field
from time import perf_counter
from typing import Callable, Optional

from pynput import keyboard

from .key_normalizer import normalize_key
from .formatter import (
    format_verbose_press,
    format_verbose_release,
    format_verbose_waiting,
)
```

–î–∞–≤–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—á–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:


–¢–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é tap_monitor.py —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```python
"""Tap monitoring and detection logic.

This module implements the core tap detection logic using pynput keyboard listener.
"""

from collections.abc import Callable
from dataclasses import dataclass
from dataclasses import field
from time import perf_counter
from typing import Any

from pynput import keyboard

from .formatter import format_verbose_press
from .formatter import format_verbose_release
from .formatter import format_verbose_waiting
from .key_normalizer import normalize_key


@dataclass
class TapState:
    """State of the current tap being monitored.

    Attributes:
        pressed_keys: Set of currently pressed keys
        tap_combination: Set of all keys that have been pressed during this tap
        start_time: Timestamp when the tap started (None if not started yet)
        is_active: Whether a tap is currently in progress
    """
    pressed_keys: set[Any] = field(default_factory=set)
    tap_combination: set[Any] = field(default_factory=set)
    start_time: float | None = None
    is_active: bool = False

    def reset(self) -> None:
        """Reset the tap state to initial values."""
        self.pressed_keys.clear()
        self.tap_combination.clear()
        self.start_time = None
        self.is_active = False


class TapMonitor:
    """Monitor keyboard events and detect key combinations.

    Displays simultaneously pressed keys after they are all released.
    No time restrictions - any key combination will be detected and displayed.

    Args:
        verbose: Whether to output verbose debug information
        on_keys_detected: Callback when keys are detected (keys, duration)
    """

    def __init__(
        self,
        verbose: bool = False,
        on_keys_detected: Callable[[set[Any], float], None] | None = None,
    ) -> None:
        self.verbose = verbose
        self.state = TapState()
        self.on_keys_detected = on_keys_detected
        self.listener: keyboard.Listener | None = None  # Will be set when start() is called

    def start(self) -> None:
        """Start monitoring keyboard events.

        This method blocks and listens for keyboard events until interrupted.
        """
        self.listener = keyboard.Listener(
            on_press=self._on_press,
            on_release=self._on_release,
            suppress=False  # Do NOT suppress events for other applications
        )
        self.listener.start()
        self.listener.join()

    def stop(self) -> None:
        """Stop monitoring keyboard events.

        This method stops the keyboard listener, allowing the monitoring
        loop to exit cleanly.
        """
        if self.listener:
            self.listener.stop()

    def _on_press(self, key: Any) -> None:
        """Handle key press event.

        Args:
            key: The pynput Key or KeyCode that was pressed
        """
        # Ignore auto-repeat (key already pressed)
        if key in self.state.pressed_keys:
            if self.verbose:
                print(f'[TRACE] {normalize_key(key)} already pressed (autorepeat), ignoring')  # noqa: T201
            return

        current_time = perf_counter()
        normalized_key = normalize_key(key)

        # If this is the first key, start the tap
        if not self.state.is_active:
            self.state.start_time = current_time
            self.state.is_active = True

            if self.verbose:
                print(format_verbose_press(normalized_key, 0.0, is_first=True))  # noqa: T201
        else:
            # Additional key in an ongoing tap
            if self.verbose:
                elapsed = current_time - self.state.start_time
                print(format_verbose_press(normalized_key, elapsed, is_first=False))  # noqa: T201

        # Add key to pressed and combination sets
        self.state.pressed_keys.add(key)
        self.state.tap_combination.add(key)

    def _on_release(self, key: Any) -> None:
        """Handle key release event.

        Args:
            key: The pynput Key or KeyCode that was released
        """
        # Remove from pressed keys
        if key in self.state.pressed_keys:
            self.state.pressed_keys.remove(key)

            if self.verbose:
                elapsed = perf_counter() - self.state.start_time if self.state.start_time else 0.0
                all_released = len(self.state.pressed_keys) == 0
                print(format_verbose_release(normalize_key(key), elapsed, all_released))  # noqa: T201

        # If all keys are released, display the combination
        if not self.state.pressed_keys and self.state.is_active:
            end_time = perf_counter()
            duration = end_time - self.state.start_time

            if self.verbose:
                print(f'[DEBUG] All keys released, duration: {duration:.3f}s')  # noqa: T201

            # Always display the keys - no validation needed
            if self.on_keys_detected:
                self.on_keys_detected(self.state.tap_combination.copy(), duration)

            # Reset state
            self.state.reset()

            if self.verbose:
                print(format_verbose_waiting())  # noqa: T201
```

## 3. –û–±–Ω–æ–≤–ª—è—é formatter.py - —É–±–∏—Ä–∞—é format_tap_invalid –∏ –æ–±–Ω–æ–≤–ª—è—é —Å–æ–æ–±—â–µ–Ω–∏—è


```python
def format_header() -> str:
    """Format the application header.
        
    Returns:
        str: Formatted header string
    """
    from .constants import __version__
    
    return f"""üéπ Tap Detector v{__version__}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)
Press Ctrl+C to exit

Listening for key combinations...
"""
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º —Ñ–∞–π–ª formatter.py:


–¢–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é formatter.py —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```python
"""Output formatting utilities for tap detector.

This module provides functions to format key detection results for console output,
including TOML configuration fragments.
"""

from .constants import __version__
from .key_normalizer import format_keys_display
from .key_normalizer import format_keys_toml


def format_header() -> str:
    """Format the application header.
        
    Returns:
        str: Formatted header string
    """
    return f"""üéπ Tap Detector v{__version__}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)
Press Ctrl+C to exit

Listening for key combinations...
"""


def format_keys_detected(keys: set, duration: float) -> str:
    """Format a key combination detection message.

    Args:
        keys: Set of pynput Key/KeyCode objects that were detected
        duration: Duration of the key combination in seconds

    Returns:
        str: Formatted message with TOML config fragment
    """
    keys_display = format_keys_display(keys)
    keys_toml = format_keys_toml(keys)

    return f"""
‚úì Keys detected: {keys_display}
  Duration: {duration:.2f}s

  üìã TOML config fragment (copy to config.toml):
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  [[hotkeys]]
  keys = {keys_toml}
  command = "your-command-here"
  args = []
  description = "Description here"
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Listening for key combinations...
"""


def format_verbose_press(key_str: str, elapsed: float, is_first: bool) -> str:
    """Format a verbose key press event.

    Args:
        key_str: Normalized key string
        elapsed: Time elapsed since combination start
        is_first: Whether this is the first key in the combination

    Returns:
        str: Formatted trace message
    """
    if is_first:
        return f'[TRACE] {elapsed:.3f}s: {key_str} pressed\n[TRACE]        ‚Üí Combination started'
    return f'[TRACE] {elapsed:.3f}s: {key_str} pressed'


def format_verbose_release(key_str: str, elapsed: float, all_released: bool) -> str:
    """Format a verbose key release event.

    Args:
        key_str: Normalized key string
        elapsed: Time elapsed since combination start
        all_released: Whether all keys have been released

    Returns:
        str: Formatted trace message
    """
    msg = f'[TRACE] {elapsed:.3f}s: {key_str} released'
    if all_released:
        msg += '\n[TRACE]        ‚Üí All keys released'
    return msg


def format_verbose_header() -> str:
    """Format the verbose mode header.

    Returns:
        str: Formatted header string
    """
    return f"""üéπ Tap Detector v{__version__} (verbose mode)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)

[DEBUG] Waiting for key events...
"""


def format_verbose_waiting() -> str:
    """Format the verbose waiting message.

    Returns:
        str: Formatted waiting message
    """
    return '\n[DEBUG] Waiting for key events...'
```

## 4. –û–±–Ω–æ–≤–ª—è—é main.py - —É–±–∏—Ä–∞—é --timeout –∏ —É–ø—Ä–æ—â–∞—é CLI


```python
"""Main entry point for tap-detector CLI application."""

import sys

import typer

from .formatter import (
    format_header,
    format_keys_detected,
    format_verbose_header,
)
from .tap_monitor import TapMonitor


app = typer.Typer(help='üéπ Tap Detector - Detect keyboard key combinations')


@app.command()
def main(
    verbose: bool = typer.Option(
        False,
        '--verbose', '-v',
        help='Enable verbose output with detailed debug traces',
    ),
) -> None:
    """
    Detect keyboard key combinations and generate TOML config fragments.

    Displays simultaneously pressed keys after they are all released.
    No time restrictions - any key combination will be detected and displayed.

    Usage examples:

        $ tap-detector

        $ tap-detector --verbose

    Press Ctrl+C to exit the detector.
    """
    # Define callback for key detection
    def on_keys_detected(keys: set, duration: float) -> None:
        """Called when keys are detected."""
        print(format_keys_detected(keys, duration))

    # Print header
    if verbose:
        print(format_verbose_header())
    else:
        print(format_header())

    # Create and start monitor
    monitor = TapMonitor(
        verbose=verbose,
        on_keys_detected=on_keys_detected,
    )

    try:
        monitor.start()
    except KeyboardInterrupt:
        print('\n\nüëã Exiting tap detector. Goodbye!')
        sys.exit(0)


if __name__ == '__main__':
    app()
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª main.py:


–¢–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é main.py —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```python
"""Main entry point for tap-detector CLI application."""

import sys
from typing import Any

import typer

from .formatter import format_header
from .formatter import format_keys_detected
from .formatter import format_verbose_header
from .tap_monitor import TapMonitor

app = typer.Typer(help='üéπ Tap Detector - Detect keyboard key combinations')


@app.command()
def main(
    verbose: bool = typer.Option(
        False,
        '--verbose', '-v',
        help='Enable verbose output with detailed debug traces',
    ),
) -> None:
    """
    Detect keyboard key combinations and generate TOML config fragments.

    Displays simultaneously pressed keys after they are all released.
    No time restrictions - any key combination will be detected and displayed.

    Usage examples:

        $ tap-detector

        $ tap-detector --verbose

    Press Ctrl+C to exit the detector.
    """

    # Define callback for key detection
    def on_keys_detected(keys: set[Any], duration: float) -> None:
        """Called when keys are detected."""
        sys.stdout.write(format_keys_detected(keys, duration))

    # Print header
    if verbose:
        sys.stdout.write(format_verbose_header())
    else:
        sys.stdout.write(format_header())

    # Create and start monitor
    monitor = TapMonitor(
        verbose=verbose,
        on_keys_detected=on_keys_detected,
    )

    try:
        monitor.start()
    except KeyboardInterrupt:
        sys.stdout.write('\n\nüëã Exiting tap detector. Goodbye!')
        sys.exit(0)


if __name__ == '__main__':
    app()
```

## 5. –û–±–Ω–æ–≤–ª—è—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é - —É–±–∏—Ä–∞—é —É–ø–æ–º–∏–Ω–∞–Ω–∏—è timeout


–û–±–Ω–æ–≤–ª—è—é README.md:


```markdown
## Features

- **Real-time key detection**: Monitors keyboard events and detects key combinations
- **TOML configuration generation**: Automatically generates configuration fragments for tap-launcher
- **Left/Right modifier distinction**: Properly distinguishes between left and right modifier keys
- **Comprehensive key support**: Supports all standard keys including function keys, navigation keys, and special keys
- **Verbose mode**: Optional detailed debug output for troubleshooting
- **Auto-repeat filtering**: Ignores repeated key press events from the OS
- **No time restrictions**: Detects any key combination regardless of duration
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º README.md:


–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é README.md —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```markdown
# Tap Launcher

**Tap Launcher** is a Linux application for detecting keyboard tap combinations and launching commands. It consists of two main components: a tap detector utility and a background daemon for executing commands.

## Overview

A "tap" is a brief press of a key combination. The application monitors keyboard events and executes configured commands when a valid tap is detected.

## Features

- **Real-time tap detection** with configurable timeout
- **Background daemon** for continuous monitoring
- **TOML configuration** for easy setup
- **Left/right modifier distinction** (e.g., `ctrl_l` vs `ctrl_r`)
- **Comprehensive key support** (modifiers, function keys, navigation, characters)
- **Verbose logging** for debugging
- **CLI management** (start/stop/restart/status)
- **Autostart support** for system integration

## Quick Start

1. **Install dependencies:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   uv sync
   ```

2. **Discover key combinations:**

   ```bash
   tap-detector
   ```

3. **Configure and start:**

   ```bash
   # Copy example config
   mkdir -p ~/.config/tap-launcher
   cp config/tap-launcher.toml.example ~/.config/tap-launcher/config.toml
   
   # Edit config with your desired key combinations
   nano ~/.config/tap-launcher/config.toml
   
   # Start the launcher
   tap-launcher start
   ```

## Components

### tap-detector

Interactive utility for discovering tap combinations. Displays detected taps in real-time and provides ready-to-use TOML configuration fragments.

**Usage:**

```bash
# Basic usage
tap-detector

# Custom timeout
tap-detector --timeout 0.3

# Verbose output
tap-detector --verbose
```

### tap-launcher

Background daemon that monitors for configured taps and executes commands.

**Usage:**

```bash
# Start daemon
tap-launcher start

# Check status
tap-launcher status

# Stop daemon
tap-launcher stop

# Restart (useful after config changes)
tap-launcher restart

# Validate configuration
tap-launcher check-config
```

## Configuration

Create `~/.config/tap-launcher/config.toml`:

```toml
[app]
tap_timeout = 0.2
log_level = "INFO"

[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"
```

## Documentation

- **[Usage Guide](docs/tap-launcher-usage.md)** - Complete usage documentation
- **[Quick Start](docs/quickstart.md)** - Getting started with tap-detector
- **[Key Mapping](docs/key-mapping.md)** - Complete key reference
- **[Troubleshooting](docs/troubleshooting-keyboard.md)** - Keyboard detection issues

## Requirements

- Python 3.13+
- Linux with X11 (Wayland support planned)
- uv package manager

## Installation

1. **Clone the repository:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   ```

2. **Install dependencies:**

   ```bash
   uv sync
   ```

3. **Activate virtual environment:**

   ```bash
   source .venv/bin/activate
   ```

## Development

This project uses:

- **Python 3.13** for latest features and performance
- **pynput** for keyboard monitoring (X11)
- **Typer** for modern CLI interface
- **uv** for fast dependency management

### Project Structure

```text
tap_launcher/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ tap_detector/           # Tap detector application
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tap_monitor.py      # Core tap detection logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ key_normalizer.py   # Key normalization and mapping
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatter.py        # Output formatting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.py        # Constants and version
‚îÇ   ‚îî‚îÄ‚îÄ tap_launcher/           # Main launcher daemon
‚îÇ       ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ       ‚îú‚îÄ‚îÄ launcher_monitor.py # Background monitoring
‚îÇ       ‚îú‚îÄ‚îÄ command_executor.py # Command execution
‚îÇ       ‚îú‚îÄ‚îÄ config_loader.py    # Configuration management
‚îÇ       ‚îú‚îÄ‚îÄ hotkey_matcher.py   # Hotkey matching logic
‚îÇ       ‚îî‚îÄ‚îÄ daemon_manager.py   # Process management
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ tap-launcher.toml.example  # Example configuration
‚îú‚îÄ‚îÄ docs/                        # Documentation
‚îú‚îÄ‚îÄ pyproject.toml              # Project metadata and dependencies
‚îî‚îÄ‚îÄ README.md
```

## Example Use Cases

### Keyboard Layout Switching

```toml
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"
```

### Application Launching

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open terminal"
```

### Media Control

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "p"]
command = "playerctl"
args = ["play-pause"]
description = "Play/pause media"
```

## Performance

- **Memory**: ~15-30 MB RSS
- **CPU**: < 0.1% when idle
- **Latency**: < 10ms from tap to command execution

## Security

Commands run with your user privileges. Ensure all commands in your config are from trusted sources. Keep your config file readable only by your user:

```bash
chmod 600 ~/.config/tap-launcher/config.toml
```

## License

This project is released into the public domain. The contents of this repository are free for any use without restrictions.

## Author

Created by [aka-NameRec](https://github.com/aka-NameRec) for personal use with full system access capabilities.

```

```markdown
# Tap Launcher

**Tap Launcher** is a Linux application for detecting keyboard tap combinations and launching commands. It consists of two main components: a tap detector utility and a background daemon for executing commands.

## Overview

A "tap" is a brief press of a key combination. The application monitors keyboard events and executes configured commands when a valid tap is detected.

## Features

- **Real-time key detection** with no time restrictions
- **Background daemon** for continuous monitoring
- **TOML configuration** for easy setup
- **Left/right modifier distinction** (e.g., `ctrl_l` vs `ctrl_r`)
- **Comprehensive key support** (modifiers, function keys, navigation, characters)
- **Verbose logging** for debugging
- **CLI management** (start/stop/restart/status)
- **Autostart support** for system integration

## Quick Start

1. **Install dependencies:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   uv sync
   ```

2. **Discover key combinations:**

   ```bash
   tap-detector
   ```

3. **Configure and start:**

   ```bash
   # Copy example config
   mkdir -p ~/.config/tap-launcher
   cp config/tap-launcher.toml.example ~/.config/tap-launcher/config.toml
   
   # Edit config with your desired key combinations
   nano ~/.config/tap-launcher/config.toml
   
   # Start the launcher
   tap-launcher start
   ```

## Components

### tap-detector

Interactive utility for discovering tap combinations. Displays detected taps in real-time and provides ready-to-use TOML configuration fragments.

**Usage:**

```bash
# Basic usage
tap-detector

# Custom timeout
tap-detector --timeout 0.3

# Verbose output
tap-detector --verbose
```

### tap-launcher

Background daemon that monitors for configured taps and executes commands.

**Usage:**

```bash
# Start daemon
tap-launcher start

# Check status
tap-launcher status

# Stop daemon
tap-launcher stop

# Restart (useful after config changes)
tap-launcher restart

# Validate configuration
tap-launcher check-config
```

## Configuration

Create `~/.config/tap-launcher/config.toml`:

```toml
[app]
tap_timeout = 0.2
log_level = "INFO"

[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"
```

## Documentation

- **[Usage Guide](docs/tap-launcher-usage.md)** - Complete usage documentation
- **[Quick Start](docs/quickstart.md)** - Getting started with tap-detector
- **[Key Mapping](docs/key-mapping.md)** - Complete key reference
- **[Troubleshooting](docs/troubleshooting-keyboard.md)** - Keyboard detection issues

## Requirements

- Python 3.13+
- Linux with X11 (Wayland support planned)
- uv package manager

## Installation

1. **Clone the repository:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   ```

2. **Install dependencies:**

   ```bash
   uv sync
   ```

3. **Activate virtual environment:**

   ```bash
   source .venv/bin/activate
   ```

## Development

This project uses:

- **Python 3.13** for latest features and performance
- **pynput** for keyboard monitoring (X11)
- **Typer** for modern CLI interface
- **uv** for fast dependency management

### Project Structure

```text
tap_launcher/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ tap_detector/           # Tap detector application
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tap_monitor.py      # Core tap detection logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ key_normalizer.py   # Key normalization and mapping
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatter.py        # Output formatting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.py        # Constants and version
‚îÇ   ‚îî‚îÄ‚îÄ tap_launcher/           # Main launcher daemon
‚îÇ       ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ       ‚îú‚îÄ‚îÄ launcher_monitor.py # Background monitoring
‚îÇ       ‚îú‚îÄ‚îÄ command_executor.py # Command execution
‚îÇ       ‚îú‚îÄ‚îÄ config_loader.py    # Configuration management
‚îÇ       ‚îú‚îÄ‚îÄ hotkey_matcher.py   # Hotkey matching logic
‚îÇ       ‚îî‚îÄ‚îÄ daemon_manager.py   # Process management
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ tap-launcher.toml.example  # Example configuration
‚îú‚îÄ‚îÄ docs/                        # Documentation
‚îú‚îÄ‚îÄ pyproject.toml              # Project metadata and dependencies
‚îî‚îÄ‚îÄ README.md
```

## Example Use Cases

### Keyboard Layout Switching

```toml
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"
```

### Application Launching

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open terminal"
```

### Media Control

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "p"]
command = "playerctl"
args = ["play-pause"]
description = "Play/pause media"
```

## Performance

- **Memory**: ~15-30 MB RSS
- **CPU**: < 0.1% when idle
- **Latency**: < 10ms from tap to command execution

## Security

Commands run with your user privileges. Ensure all commands in your config are from trusted sources. Keep your config file readable only by your user:

```bash
chmod 600 ~/.config/tap-launcher/config.toml
```

## License

This project is released into the public domain. The contents of this repository are free for any use without restrictions.

## Author

Created by [aka-NameRec](https://github.com/aka-NameRec) for personal use with full system access capabilities.

```

```markdown
# Tap Launcher

**Tap Launcher** is a Linux application for detecting keyboard tap combinations and launching commands. It consists of two main components: a tap detector utility and a background daemon for executing commands.

## Overview

A "tap" is a brief press of a key combination. The application monitors keyboard events and executes configured commands when a valid tap is detected.

## Features

- **Real-time key detection** with no time restrictions
- **Background daemon** for continuous monitoring
- **TOML configuration** for easy setup
- **Left/right modifier distinction** (e.g., `ctrl_l` vs `ctrl_r`)
- **Comprehensive key support** (modifiers, function keys, navigation, characters)
- **Verbose logging** for debugging
- **CLI management** (start/stop/restart/status)
- **Autostart support** for system integration

## Quick Start

1. **Install dependencies:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   uv sync
   ```

2. **Discover key combinations:**

   ```bash
   tap-detector
   ```

3. **Configure and start:**

   ```bash
   # Copy example config
   mkdir -p ~/.config/tap-launcher
   cp config/tap-launcher.toml.example ~/.config/tap-launcher/config.toml
   
   # Edit config with your desired key combinations
   nano ~/.config/tap-launcher/config.toml
   
   # Start the launcher
   tap-launcher start
   ```

## Components

### tap-detector

Interactive utility for discovering key combinations. Displays detected keys in real-time and provides ready-to-use TOML configuration fragments.

**Usage:**

```bash
# Basic usage
tap-detector

# Verbose output
tap-detector --verbose
```

### tap-launcher

Background daemon that monitors for configured taps and executes commands.

**Usage:**

```bash
# Start daemon
tap-launcher start

# Check status
tap-launcher status

# Stop daemon
tap-launcher stop

# Restart (useful after config changes)
tap-launcher restart

# Validate configuration
tap-launcher check-config
```

## Configuration

Create `~/.config/tap-launcher/config.toml`:

```toml
[app]
tap_timeout = 0.2
log_level = "INFO"

[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"
```

## Documentation

- **[Usage Guide](docs/tap-launcher-usage.md)** - Complete usage documentation
- **[Quick Start](docs/quickstart.md)** - Getting started with tap-detector
- **[Key Mapping](docs/key-mapping.md)** - Complete key reference
- **[Troubleshooting](docs/troubleshooting-keyboard.md)** - Keyboard detection issues

## Requirements

- Python 3.13+
- Linux with X11 (Wayland support planned)
- uv package manager

## Installation

1. **Clone the repository:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   ```

2. **Install dependencies:**

   ```bash
   uv sync
   ```

3. **Activate virtual environment:**

   ```bash
   source .venv/bin/activate
   ```

## Development

This project uses:

- **Python 3.13** for latest features and performance
- **pynput** for keyboard monitoring (X11)
- **Typer** for modern CLI interface
- **uv** for fast dependency management

### Project Structure

```text
tap_launcher/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ tap_detector/           # Tap detector application
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tap_monitor.py      # Core tap detection logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ key_normalizer.py   # Key normalization and mapping
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatter.py        # Output formatting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.py        # Constants and version
‚îÇ   ‚îî‚îÄ‚îÄ tap_launcher/           # Main launcher daemon
‚îÇ       ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ       ‚îú‚îÄ‚îÄ launcher_monitor.py # Background monitoring
‚îÇ       ‚îú‚îÄ‚îÄ command_executor.py # Command execution
‚îÇ       ‚îú‚îÄ‚îÄ config_loader.py    # Configuration management
‚îÇ       ‚îú‚îÄ‚îÄ hotkey_matcher.py   # Hotkey matching logic
‚îÇ       ‚îî‚îÄ‚îÄ daemon_manager.py   # Process management
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ tap-launcher.toml.example  # Example configuration
‚îú‚îÄ‚îÄ docs/                        # Documentation
‚îú‚îÄ‚îÄ pyproject.toml              # Project metadata and dependencies
‚îî‚îÄ‚îÄ README.md
```

## Example Use Cases

### Keyboard Layout Switching

```toml
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"
```

### Application Launching

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open terminal"
```

### Media Control

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "p"]
command = "playerctl"
args = ["play-pause"]
description = "Play/pause media"
```

## Performance

- **Memory**: ~15-30 MB RSS
- **CPU**: < 0.1% when idle
- **Latency**: < 10ms from tap to command execution

## Security

Commands run with your user privileges. Ensure all commands in your config are from trusted sources. Keep your config file readable only by your user:

```bash
chmod 600 ~/.config/tap-launcher/config.toml
```

## License

This project is released into the public domain. The contents of this repository are free for any use without restrictions.

## Author

Created by [aka-NameRec](https://github.com/aka-NameRec) for personal use with full system access capabilities.

```

```markdown
# Tap Launcher

**Tap Launcher** is a Linux application for detecting keyboard tap combinations and launching commands. It consists of two main components: a tap detector utility and a background daemon for executing commands.

## Overview

A "tap" is a brief press of a key combination. The application monitors keyboard events and executes configured commands when a valid tap is detected.

## Features

- **Real-time key detection** with no time restrictions
- **Background daemon** for continuous monitoring
- **TOML configuration** for easy setup
- **Left/right modifier distinction** (e.g., `ctrl_l` vs `ctrl_r`)
- **Comprehensive key support** (modifiers, function keys, navigation, characters)
- **Verbose logging** for debugging
- **CLI management** (start/stop/restart/status)
- **Autostart support** for system integration

## Quick Start

1. **Install dependencies:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   uv sync
   ```

2. **Discover key combinations:**

   ```bash
   tap-detector
   ```

3. **Configure and start:**

   ```bash
   # Copy example config
   mkdir -p ~/.config/tap-launcher
   cp config/tap-launcher.toml.example ~/.config/tap-launcher/config.toml
   
   # Edit config with your desired key combinations
   nano ~/.config/tap-launcher/config.toml
   
   # Start the launcher
   tap-launcher start
   ```

## Components

### tap-detector

Interactive utility for discovering key combinations. Displays detected keys in real-time and provides ready-to-use TOML configuration fragments.

**Usage:**

```bash
# Basic usage
tap-detector

# Verbose output
tap-detector --verbose
```

### tap-launcher

Background daemon that monitors for configured taps and executes commands.

**Usage:**

```bash
# Start daemon
tap-launcher start

# Check status
tap-launcher status

# Stop daemon
tap-launcher stop

# Restart (useful after config changes)
tap-launcher restart

# Validate configuration
tap-launcher check-config
```

## Configuration

Create `~/.config/tap-launcher/config.toml`:

```toml
[app]
log_level = "INFO"

[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"
```

## Documentation

- **[Usage Guide](docs/tap-launcher-usage.md)** - Complete usage documentation
- **[Quick Start](docs/quickstart.md)** - Getting started with tap-detector
- **[Key Mapping](docs/key-mapping.md)** - Complete key reference
- **[Troubleshooting](docs/troubleshooting-keyboard.md)** - Keyboard detection issues

## Requirements

- Python 3.13+
- Linux with X11 (Wayland support planned)
- uv package manager

## Installation

1. **Clone the repository:**

   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   ```

2. **Install dependencies:**

   ```bash
   uv sync
   ```

3. **Activate virtual environment:**

   ```bash
   source .venv/bin/activate
   ```

## Development

This project uses:

- **Python 3.13** for latest features and performance
- **pynput** for keyboard monitoring (X11)
- **Typer** for modern CLI interface
- **uv** for fast dependency management

### Project Structure

```text
tap_launcher/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ tap_detector/           # Tap detector application
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tap_monitor.py      # Core tap detection logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ key_normalizer.py   # Key normalization and mapping
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatter.py        # Output formatting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.py        # Constants and version
‚îÇ   ‚îî‚îÄ‚îÄ tap_launcher/           # Main launcher daemon
‚îÇ       ‚îú‚îÄ‚îÄ main.py             # CLI entry point
‚îÇ       ‚îú‚îÄ‚îÄ launcher_monitor.py # Background monitoring
‚îÇ       ‚îú‚îÄ‚îÄ command_executor.py # Command execution
‚îÇ       ‚îú‚îÄ‚îÄ config_loader.py    # Configuration management
‚îÇ       ‚îú‚îÄ‚îÄ hotkey_matcher.py   # Hotkey matching logic
‚îÇ       ‚îî‚îÄ‚îÄ daemon_manager.py   # Process management
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ tap-launcher.toml.example  # Example configuration
‚îú‚îÄ‚îÄ docs/                        # Documentation
‚îú‚îÄ‚îÄ pyproject.toml              # Project metadata and dependencies
‚îî‚îÄ‚îÄ README.md
```

## Example Use Cases

### Keyboard Layout Switching

```toml
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"
```

### Application Launching

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open terminal"
```

### Media Control

```toml
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "p"]
command = "playerctl"
args = ["play-pause"]
description = "Play/pause media"
```

## Performance

- **Memory**: ~15-30 MB RSS
- **CPU**: < 0.1% when idle
- **Latency**: < 10ms from tap to command execution

## Security

Commands run with your user privileges. Ensure all commands in your config are from trusted sources. Keep your config file readable only by your user:

```bash
chmod 600 ~/.config/tap-launcher/config.toml
```

## License

This project is released into the public domain. The contents of this repository are free for any use without restrictions.

## Author

Created by [aka-NameRec](https://github.com/aka-NameRec) for personal use with full system access capabilities.

```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é quickstart.md:


```markdown
# Quick Start Guide

This guide will help you get started with `tap-detector` - the interactive utility for discovering keyboard key combinations.

## What is tap-detector?

`tap-detector` is a command-line tool that helps you discover and test keyboard key combinations. It monitors your keyboard in real-time and displays the keys you press, along with ready-to-use TOML configuration fragments for `tap-launcher`.

## Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/aka-NameRec/tap_launcher.git
   cd tap_launcher
   ```

2. **Install dependencies:**
   ```bash
   uv sync
   ```

3. **Activate virtual environment:**
   ```bash
   source .venv/bin/activate
   ```

## Basic Usage

### Start the detector

```bash
tap-detector
```

You'll see output like this:

```
üéπ Tap Detector v0.1.0
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)
Press Ctrl+C to exit

Listening for key combinations...
```

### Test key combinations

Now press some key combinations! For example:

1. **Press and hold** `Ctrl+Shift` (left side)
2. **Release both keys**

You should see output like:

```
‚úì Keys detected: ctrl_l+shift_l
  Duration: 0.15s

  üìã TOML config fragment (copy to config.toml):
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  [[hotkeys]]
  keys = ["ctrl_l", "shift_l"]
  command = "your-command-here"
  args = []
  description = "Description here"
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Listening for key combinations...
```

## Command Line Options

### Verbose Mode

For detailed debug information:

```bash
tap-detector --verbose
```

This will show:
- Individual key press/release events
- Timing information
- Debug messages about key detection

## Important Notes

### Modifier Distinction

`tap-detector` distinguishes between left and right modifier keys:

- `ctrl_l` = Left Ctrl
- `ctrl_r` = Right Ctrl
- `shift_l` = Left Shift
- `shift_r` = Right Shift
- `alt_l` = Left Alt
- `alt_r` = Right Alt

This is important for `tap-launcher` configuration!

### Key Detection

Keys are detected when:
1. **All keys are released** (no time restrictions)
2. **Any combination** of keys can be detected
3. **All pressed keys** are included in the output

## Supported Keys

### Modifiers
- `ctrl_l`, `ctrl_r` - Control keys
- `shift_l`, `shift_r` - Shift keys  
- `alt_l`, `alt_r` - Alt keys
- `super_l`, `super_r` - Super/Windows keys

### Function Keys
- `f1` through `f20`

### Navigation
- `up`, `down`, `left`, `right`
- `home`, `end`
- `page_up`, `page_down`
- `insert`, `delete`

### Special Keys
- `space`, `enter`, `tab`, `backspace`
- `esc`, `caps_lock`
- `print_screen`, `scroll_lock`, `pause`

### Regular Characters
- All letters: `a`, `b`, `c`, etc.
- All numbers: `1`, `2`, `3`, etc.
- Special characters: `!`, `@`, `#`, etc.

## Troubleshooting

### No keys detected

1. **Check permissions**: You may need to run with `sudo` for keyboard access
2. **Check display**: Make sure you're running in a graphical environment (X11)
3. **Check verbose mode**: Use `--verbose` to see debug information

### Keys not recognized

1. **Check key mapping**: See `docs/key-mapping.md` for complete reference
2. **Check verbose mode**: See what keys are actually being detected
3. **Report issues**: Unknown keys will be logged for future support

## Next Steps

1. **Discover combinations**: Use `tap-detector` to find the key combinations you want
2. **Copy TOML fragments**: Copy the generated configuration to your `tap-launcher` config
3. **Configure tap-launcher**: Set up your commands and start the daemon
4. **Test end-to-end**: Verify that your hotkeys work as expected

## Example Session

Here's a complete example session:

```bash
$ tap-detector --verbose

üéπ Tap Detector v0.1.0 (verbose mode)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)

[DEBUG] Waiting for key events...

[TRACE] 0.000s: ctrl_l pressed
[TRACE]        ‚Üí Combination started
[TRACE] 0.050s: shift_l pressed
[TRACE] 0.150s: shift_l released
[TRACE]        ‚Üí All keys released
[DEBUG] All keys released, duration: 0.150s

‚úì Keys detected: ctrl_l+shift_l
  Duration: 0.15s

  üìã TOML config fragment (copy to config.toml):
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  [[hotkeys]]
  keys = ["ctrl_l", "shift_l"]
  command = "your-command-here"
  args = []
  description = "Description here"
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Listening for key combinations...

[DEBUG] Waiting for key events...
```

This shows a successful detection of `Ctrl+Shift` (left side) with detailed timing information.
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º quickstart.md:


–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é quickstart.md —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```markdown
# Quick Start Guide - Tap Detector

## Installation

1. Navigate to the project directory:
```bash
cd /home/shtirliz/workspace/myself/tapper_launch
```

2. Sync dependencies (creates virtual environment automatically):
```bash
uv sync
```

## Running tap-detector

### Basic Usage

```bash
# Run with default settings (no time restrictions)
uv run tap-detector

# Run with verbose output for debugging
uv run tap-detector --verbose
```

### How to Use

1. Start the detector
2. Press and release a key combination
3. The detector will show you the detected keys and provide a TOML config fragment
4. Copy the TOML fragment into your `config.toml` file
5. Press Ctrl+C to exit

### Example Session

```
$ uv run tap-detector

üéπ Tap Detector v0.1.0
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Detecting key combinations (no time restrictions)
Press Ctrl+C to exit

Listening for key combinations...

‚úì Keys detected: ctrl_l+shift_l
  Duration: 0.18s
  
  üìã TOML config fragment (copy to config.toml):
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  [[hotkeys]]
  keys = ["ctrl_l", "shift_l"]
  command = "your-command-here"
  args = []
  description = "Description here"
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Listening for key combinations...
```

## Important Notes

### Left vs Right Modifiers

The detector **distinguishes between left and right modifier keys**:
- `ctrl_l` ‚â† `ctrl_r`
- `shift_l` ‚â† `shift_r`
- `alt_l` ‚â† `alt_r`
- `super_l` ‚â† `super_r`

This is intentional and allows you to create different actions for different sides. For example:
- Left Shift + Left Ctrl ‚Üí Switch to English layout
- Right Shift + Right Ctrl ‚Üí Switch to Russian layout

### Key Detection

Keys are detected when:
1. You press one or more keys
2. You release **all** keys (no time restrictions)
3. **All pressed keys** are included in the output

### Supported Keys

The detector supports all keyboard keys:
- **Modifiers**: ctrl_l, ctrl_r, shift_l, shift_r, alt_l, alt_r, super_l, super_r, alt_gr
- **Function keys**: f1, f2, ..., f20
- **Navigation**: up, down, left, right, home, end, page_up, page_down, insert, delete
- **Special keys**: space, enter, tab, backspace, esc, caps_lock, etc.
- **Regular keys**: a-z (lowercase), 0-9, and other characters

See `docs/key-mapping.md` for the complete reference.

## Troubleshooting

### Permission Issues

If you get permission errors accessing the keyboard:
- On X11: No special permissions needed
- On Wayland (future): You may need to add your user to the `input` group

### Keys Not Detected

1. Make sure your terminal/IDE doesn't capture the key combination first
2. Try with `--verbose` to see debug output
3. Check if the keys are being recognized

### Application Doesn't Start

1. Make sure dependencies are installed: `uv sync`
2. Check Python version: `python --version` (requires 3.13+)
3. Try running with: `uv run python -m tap_detector.main`

## Next Steps

Once you've identified your desired key combinations:

1. Copy the example config:
```bash
mkdir -p ~/.config/tap-launcher
cp config/tap-launcher.toml.example ~/.config/tap-launcher/config.toml
```

2. Edit the config file and paste your TOML fragments
3. Wait for Phase 1 (`tap-launcher`) to be implemented üòä

## Getting Help

Run `tap-detector --help` for command-line options.
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é config/tap-launcher.toml.example:


```plaintext
# Tap Launcher Configuration
# Copy this file to ~/.config/tap-launcher/config.toml and customize

[app]
# Log level: DEBUG, INFO, WARNING, ERROR
log_level = "INFO"
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞–µ–º config/tap-launcher.toml.example:


–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é config/tap-launcher.toml.example —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:


```plaintext
# Tap Launcher Configuration Example
# Copy this file to ~/.config/tap-launcher/config.toml and customize

# ==============================================================================
# KEY MAPPING REFERENCE
# ==============================================================================
#
# Use 'tap-detector' to discover key combinations. It will show canonical names.
#
# MODIFIERS (distinguish left/right):
#   ctrl_l, ctrl_r     - Left/Right Control
#   shift_l, shift_r   - Left/Right Shift
#   alt_l, alt_r       - Left/Right Alt
#   super_l, super_r   - Left/Right Super/Windows/Command
#   alt_gr             - AltGr (right Alt with special function)
#
# FUNCTION KEYS:
#   f1, f2, ..., f20
#
# NAVIGATION:
#   up, down, left, right, home, end, page_up, page_down, insert, delete
#
# SPECIAL KEYS:
#   space, enter, tab, backspace, esc, caps_lock, print_screen, scroll_lock,
#   pause, menu, num_lock
#
# REGULAR KEYS:
#   a-z (lowercase), 0-9, and other characters
#
# EXAMPLE:
#   keys = ["ctrl_l", "shift_l"]     # Left Ctrl + Left Shift
#   keys = ["ctrl_r", "shift_r"]     # Right Ctrl + Right Shift
#   keys = ["ctrl_l", "alt_l", "t"]  # Left Ctrl + Left Alt + T
#
# For complete reference, see: docs/key-mapping.md
# ==============================================================================

[app]
# Logging configuration
log_level = "INFO"  # DEBUG, INFO, WARNING, ERROR
log_file = "~/.local/share/tap-launcher/tap-launcher.log"

# Enable debug mode for troubleshooting
debug_mode = false
verbose_logging = false

# ==============================================================================
# HOTKEY CONFIGURATIONS
# ==============================================================================
# Multiple hotkey configurations
# Use tap-detector to find your key combinations!
#
# ADVANCED FEATURE: start_timer_from_second_key
# By default (false), the tap timer starts when you press the FIRST key.
# If set to true, the timer starts when you press the SECOND key.
# This is useful when you might hold down the first key while searching
# for the second key (e.g., holding Ctrl while finding Shift).
#
# Without start_timer_from_second_key (classic behavior):
#   Press Ctrl at t=0.00s ‚Üí timer starts
#   Press Shift at t=0.15s (searching for it!)
#   Release all at t=0.25s ‚Üí duration = 0.25s > 0.2s timeout ‚ùå INVALID
#
# With start_timer_from_second_key=true:
#   Press Ctrl at t=0.00s ‚Üí timer NOT started yet
#   Press Shift at t=0.15s ‚Üí timer starts NOW
#   Release all at t=0.25s ‚Üí duration = 0.10s < 0.2s timeout ‚úÖ VALID

# Example 1: Switch keyboard layout with delayed timer start
# (allows you to hold down first key while finding second key)
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"
start_timer_from_second_key = true  # Timer starts from second key

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"
start_timer_from_second_key = true  # Timer starts from second key

# Example 2: Open terminal with classic tap behavior
# (timer starts from first key - default behavior)
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open GNOME Terminal"
# start_timer_from_second_key = false  # Default, can be omitted

# Example 3: Open Firefox
[[hotkeys]]
keys = ["super_l", "alt_l"]
command = "firefox"
args = ["--new-window"]
description = "Open Firefox in new window"

# Example 4: Custom script
[[hotkeys]]
keys = ["super_l", "shift_l"]
command = "/home/user/scripts/custom-script.sh"
args = []
description = "Run custom script"

# Example 5: Control media playback
# [[hotkeys]]
# keys = ["ctrl_l", "alt_l", "p"]
# command = "playerctl"
# args = ["play-pause"]
# description = "Play/pause media"

# You can add more hotkey combinations here
# Run 'tap-detector' to discover available key combinations

```

```plaintext
# Tap Launcher Configuration Example
# Copy this file to ~/.config/tap-launcher/config.toml and customize

# ==============================================================================
# KEY MAPPING REFERENCE
# ==============================================================================
#
# Use 'tap-detector' to discover key combinations. It will show canonical names.
#
# MODIFIERS (distinguish left/right):
#   ctrl_l, ctrl_r     - Left/Right Control
#   shift_l, shift_r   - Left/Right Shift
#   alt_l, alt_r       - Left/Right Alt
#   super_l, super_r   - Left/Right Super/Windows/Command
#   alt_gr             - AltGr (right Alt with special function)
#
# FUNCTION KEYS:
#   f1, f2, ..., f20
#
# NAVIGATION:
#   up, down, left, right, home, end, page_up, page_down, insert, delete
#
# SPECIAL KEYS:
#   space, enter, tab, backspace, esc, caps_lock, print_screen, scroll_lock,
#   pause, menu, num_lock
#
# REGULAR KEYS:
#   a-z (lowercase), 0-9, and other characters
#
# EXAMPLE:
#   keys = ["ctrl_l", "shift_l"]     # Left Ctrl + Left Shift
#   keys = ["ctrl_r", "shift_r"]     # Right Ctrl + Right Shift
#   keys = ["ctrl_l", "alt_l", "t"]  # Left Ctrl + Left Alt + T
#
# For complete reference, see: docs/key-mapping.md
# ==============================================================================

[app]
# Logging configuration
log_level = "INFO"  # DEBUG, INFO, WARNING, ERROR
log_file = "~/.local/share/tap-launcher/tap-launcher.log"

# Enable debug mode for troubleshooting
debug_mode = false
verbose_logging = false

# ==============================================================================
# HOTKEY CONFIGURATIONS
# ==============================================================================
# Multiple hotkey configurations
# Use tap-detector to find your key combinations!
#
# Example 1: Switch keyboard layout
[[hotkeys]]
keys = ["ctrl_l", "shift_l"]
command = "setxkbmap"
args = ["us"]
description = "Switch to English layout"

[[hotkeys]]
keys = ["ctrl_r", "shift_r"]
command = "setxkbmap"
args = ["ru"]
description = "Switch to Russian layout"

# Example 2: Open terminal
[[hotkeys]]
keys = ["ctrl_l", "alt_l", "t"]
command = "gnome-terminal"
args = []
description = "Open GNOME Terminal"

# Example 3: Open Firefox
[[hotkeys]]
keys = ["super_l", "alt_l"]
command = "firefox"
args = ["--new-window"]
description = "Open Firefox in new window"

# Example 4: Custom script
[[hotkeys]]
keys = ["super_l", "shift_l"]
command = "/home/user/scripts/custom-script.sh"
args = []
description = "Run custom script"

# Example 5: Control media playback
# [[hotkeys]]
# keys = ["ctrl_l", "alt_l", "p"]
# command = "playerctl"
# args = ["play-pause"]
# description = "Play/pause media"

# You can add more hotkey combinations here
# Run 'tap-detector' to discover available key combinations

```

## 6. –ü—Ä–æ–≤–µ—Ä—è—é –ª–∏–Ω—Ç–µ—Ä –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö


## 7. –¢–µ—Å—Ç–∏—Ä—É—é –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ


–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–∏—Ä—É—é –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:


–ü–æ–ø—Ä–æ–±—É—é —Å verbose —Ä–µ–∂–∏–º–æ–º:


–ü–æ–ø—Ä–æ–±—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python:


## 8. –°–æ–∑–¥–∞—é –∫—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

## ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –≤–Ω–µ—Å–µ–Ω—ã!

### –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

1. **–£–±—Ä–∞–ª timeout –∏–∑ constants.py** - —É–¥–∞–ª–∏–ª `DEFAULT_TIMEOUT = 0.2`

2. **–£–ø—Ä–æ—Å—Ç–∏–ª TapMonitor** - —É–±—Ä–∞–ª:
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `timeout` –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—é timeout –≤ `_on_release`
   - Callback `on_tap_invalid`
   - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ timeout
   - –°–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É —Å `timer_delayed`

3. **–û–±–Ω–æ–≤–∏–ª main.py** - —É–±—Ä–∞–ª:
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `--timeout` –∏–∑ CLI
   - –ò–º–ø–æ—Ä—Ç `DEFAULT_TIMEOUT`
   - Callback `on_tap_invalid`
   - –ü–µ—Ä–µ–¥–∞—á—É `timeout` –≤ `TapMonitor`

4. **–£–ø—Ä–æ—Å—Ç–∏–ª formatter.py** - —É–±—Ä–∞–ª:
   - –§—É–Ω–∫—Ü–∏—é `format_tap_invalid`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `timeout` –∏–∑ `format_header` –∏ `format_verbose_header`
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª `format_tap_detected` –≤ `format_keys_detected`
   - –û–±–Ω–æ–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

5. **–û–±–Ω–æ–≤–∏–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –∏–∑–º–µ–Ω–∏–ª:
   - README.md - —É–±—Ä–∞–ª —É–ø–æ–º–∏–Ω–∞–Ω–∏—è timeout
   - quickstart.md - —É–ø—Ä–æ—Å—Ç–∏–ª –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —É–±—Ä–∞–ª timeout
   - config/tap-launcher.toml.example - —É–±—Ä–∞–ª `tap_timeout` –∏ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ tap-detector:

- **–ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏** - –ª—é–±—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–ª–∞–≤–∏—à –¥–µ—Ç–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è
- **–ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞** - –Ω–∞–∂–∞–ª –∫–ª–∞–≤–∏—à–∏ ‚Üí –æ—Ç–ø—É—Å—Ç–∏–ª –≤—Å–µ ‚Üí –ø–æ–∫–∞–∑–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–ù–∏–∫–∞–∫–∏—Ö "–Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Ç–∞–ø–æ–≤"** - –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏
- **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π CLI** - —Ç–æ–ª—å–∫–æ `--verbose` –æ–ø—Ü–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

- ‚úÖ `tap-detector --help` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π timeout
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (timeout 3s –∑–∞–≤–µ—Ä—à–∏–ª –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### –ì–æ—Ç–æ–≤–æ –∫ commit:

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. `tap-detector` —Ç–µ–ø–µ—Ä—å:
- –ù–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç "—Ç–∞–ø—ã" –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º —Å–º—ã—Å–ª–µ
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∂–∞—Ç—ã–µ –∫–ª–∞–≤–∏—à–∏ –ø–æ—Å–ª–µ –∏—Ö –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è
- –ù–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –£–±—Ä–∞–Ω—ã –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ "–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Ç–∞–ø–∞—Ö"

–ú–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å commit! üéâ

